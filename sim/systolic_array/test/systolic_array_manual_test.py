#=========================================================================
# RegArray_test
#=========================================================================

import pytest

from pymtl3 import *
from pymtl3.stdlib.test_utils import run_test_vector_sim

from systolic_array.KernelCellX import KernelCellX

#-------------------------------------------------------------------------
# load full
#-------------------------------------------------------------------------

basic_test = [
  ('x1 x1_val  x2  x2_val   x3  x3_val result* result_val*'),
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 1,    1,    1,    1,    1,    1,    '?',    '?'   ],
  [ 2,    1,    1,    1,    1,    1,    '?',    '?'   ],
  [ 4,    1,    1,    1,    1,    1,    '?',    '?'   ],
  [ 8,    1,    1,    1,    1,    1,    '?',    '?'   ],
  [ 16,    1,    1,    1,    1,    1,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
  [ 0,    0,    0,    0,    0,    0,    '?',    '?'   ],
]

#-------------------------------------------------------------------------
# test
#-------------------------------------------------------------------------

@pytest.mark.parametrize( "test_vectors", [
  basic_test
])

def test( test_vectors, cmdline_opts ):
    run_test_vector_sim( KernelCellX(), test_vectors, cmdline_opts )

